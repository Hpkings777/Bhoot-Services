<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Base64 Encoder/Decoder</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    .tabs {
      display: flex;
      margin: 20px 0;
      gap: 10px;
    }

    .tab {
      padding: 10px 20px;
      background: #222;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    .tab.active {
      background: #00e676;
      color: #000;
      font-weight: bold;
    }

    .container {
      width: 100%;
      max-width: 600px;
    }

    .panel {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      position: relative;
    }

    .panel.active {
      display: flex;
    }

    textarea {
      width: 100%;
      height: 100px;
      border-radius: 6px;
      padding: 10px;
      font-size: 14px;
      resize: vertical;
    }

    button {
      padding: 10px 20px;
      border: none;
      background: #00e676;
      color: #000;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }

    input[type="file"] {
      display: none;
    }

    label.custom-file {
      background: #00e676;
      color: #000;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }

    img.preview {
      max-width: 100%;
      max-height: 300px;
      border-radius: 8px;
    }

    .output {
      word-break: break-all;
    }

    .copy-btn, .paste-btn {
      position: absolute;
      bottom: 10px;
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 6px;
      background: #00e676;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }

    .copy-btn {
      right: 10px;
    }

    .paste-btn {
      left: 10px;
    }
  </style>
</head>
<body>
  <h1>üß¨ Base64 Encoder / Decoder</h1>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('text')">Text</div>
    <div class="tab" onclick="switchTab('image')">Image</div>
  </div>

  <div class="container">
    <!-- Text Panel -->
    <div id="text" class="panel active">
      <textarea id="textInput" placeholder="Enter your text here..."></textarea>
      <div>
        <button onclick="encodeText()">Encode</button>
        <button onclick="decodeText()">Decode</button>
      </div>
      <div style="position: relative; width: 100%;">
        <textarea id="textOutput" readonly placeholder="Output will appear here..."></textarea>
        <button class="copy-btn" onclick="copyText('textOutput')">üìã Copy</button>
      </div>
    </div>

    <!-- Image Panel -->
    <div id="image" class="panel">
      <label for="fileInput" class="custom-file">üìÅ Choose Image</label>
      <input type="file" id="fileInput" accept="image/*">
      <img id="imgPreview" class="preview" src="" style="display:none" />
      <div>
        <button onclick="encodeImage()">Encode</button>
      </div>
      <div style="position: relative; width: 100%;">
        <textarea id="imageOutput" class="output" readonly placeholder="Base64 code will appear here..."></textarea>
        <button class="copy-btn" onclick="copyText('imageOutput')">üìã Copy</button>
        <button class="paste-btn" onclick="pasteImage()">üì• Paste</button>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tabName) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
      document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
      document.getElementById(tabName).classList.add('active');
    }

    function encodeText() {
      const input = document.getElementById('textInput').value;
      const encoded = btoa(input);
      document.getElementById('textOutput').value = encoded;
    }

    function decodeText() {
      const input = document.getElementById('textInput').value;
      try {
        const decoded = atob(input);
        document.getElementById('textOutput').value = decoded;
      } catch (e) {
        document.getElementById('textOutput').value = 'Invalid Base64 string!';
      }
    }

    function encodeImage() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert('Please select an image.');

      const reader = new FileReader();
      reader.onload = function(e) {
        const base64String = e.target.result;
        document.getElementById('imageOutput').value = base64String;
        document.getElementById('imgPreview').src = base64String;
        document.getElementById('imgPreview').style.display = 'block';
      };
      reader.readAsDataURL(file);
    }

    function pasteImage() {
      navigator.clipboard.readText().then(text => {
        document.getElementById('imageOutput').value = text;
        if (text.startsWith("data:image")) {
          document.getElementById('imgPreview').src = text;
          document.getElementById('imgPreview').style.display = 'block';
        } else {
          alert("Pasted content is not a valid image base64.");
        }
      }).catch(err => alert("Clipboard access denied."));
    }

    function copyText(id) {
      const textArea = document.getElementById(id);
      textArea.select();
      document.execCommand("copy");
    }
  </script>
</body>
</html>